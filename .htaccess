# Disable directory browsing
Options -Indexes

# Define UTF-8 Charset
AddDefaultCharset utf-8

# Enforce https
RewriteEngine On
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://dyscribe.com/$1 [R,L]

# Normalize urls (redirect www to /)
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^www.dyscribe.com [NC]
RewriteRule ^(.*)$ https://dyscribe.com/$1 [L,R=301]
RewriteCond %{HTTP_REFERER} ^http://.*7makemoneyonline\.com/ [NC,OR]
RewriteCond %{HTTP_REFERER} ^http://.*buttons-for-websites\.com/ [NC,OR]
RewriteCond %{HTTP_REFERER} ^http://.*social-buttons\.com/ [NC,OR]
RewriteCond %{HTTP_REFERER} ^http://.*semalt\.com/ [NC]
RewriteRule ^(.*)$ â€“ [F,L]

# Keep alive
<IfModule mod_headers.c>
 Header set Connection keep-alive
</IfModule>

# Deflate compression by MimeType
<IfModule mod_deflate.c>
 <FilesMatch "\.(js|min.js|jpg|jpeg|gif|png|ico|json|html|css)$">
  ExpiresActive on
  ExpiresDefault "access plus 1 month"
  SetOutputFilter DEFLATE
 </FilesMatch>
</IfModule>

# DEFLATE by type - html, text, css, xml
AddOutputFilterByType DEFLATE text/html text/plain text/css text/xml

# Use gzip compression if available
<IfModule mod_gzip.c>
 mod_gzip_on       Yes
 mod_gzip_dechunk  Yes
 mod_gzip_item_include file      \.(html?|txt|css|js|php|pl|json|min.js)$
 mod_gzip_item_include handler   ^cgi-script$
 mod_gzip_item_include mime      ^text/.*
 mod_gzip_item_include mime      ^application/x-javascript.*
 mod_gzip_item_exclude mime      ^image/.*
 mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</IfModule>

# Enable caching
<FilesMatch ".(flv|gif|jpg|jpeg|png|ico|swf|js|css|pdf|json)$">
 Header set Cache-Control "max-age=2592000"
</FilesMatch>

# To do
# Custom error pages
# ErrorDocument 401 /error/401.php
# ErrorDocument 403 /error/403.php
ErrorDocument 404 /_error/404.html
# ErrorDocument 500 /error/500.php
